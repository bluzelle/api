
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Bluzelle API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo.png" class="logo" alt="Logo" />
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc" class="toc-list-h1">
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="introduction">Introduction</a>
          </li>
          <li>
            <a href="#getting-bluzelle" class="toc-h1 toc-link" data-title="getting-bluzelle">Getting Bluzelle</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#crud-application" class="toc-h2 toc-link" data-title="crud-application">CRUD Application</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#js-api" class="toc-h1 toc-link" data-title="js-api">JS API</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#connect-ws-uuid" class="toc-h2 toc-link" data-title="connect-ws-uuid">connect(ws, uuid)</a>
                  </li>
                  <li>
                    <a href="#create-key-value" class="toc-h2 toc-link" data-title="create-key-value">create(key, value)</a>
                  </li>
                  <li>
                    <a href="#read-key" class="toc-h2 toc-link" data-title="read-key">read(key)</a>
                  </li>
                  <li>
                    <a href="#update-key-value" class="toc-h2 toc-link" data-title="update-key-value">update(key, value)</a>
                  </li>
                  <li>
                    <a href="#remove-key" class="toc-h2 toc-link" data-title="remove-key">remove(key)</a>
                  </li>
                  <li>
                    <a href="#has-key" class="toc-h2 toc-link" data-title="has-key">has(key)</a>
                  </li>
                  <li>
                    <a href="#keys" class="toc-h2 toc-link" data-title="keys">keys()</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#websocket-api" class="toc-h1 toc-link" data-title="websocket-api">WebSocket API</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#create" class="toc-h2 toc-link" data-title="create">create</a>
                  </li>
                  <li>
                    <a href="#update" class="toc-h2 toc-link" data-title="update">update</a>
                  </li>
                  <li>
                    <a href="#delete" class="toc-h2 toc-link" data-title="delete">delete</a>
                  </li>
                  <li>
                    <a href="#has" class="toc-h2 toc-link" data-title="has">has</a>
                  </li>
                  <li>
                    <a href="#keys-2" class="toc-h2 toc-link" data-title="keys">keys</a>
                  </li>
                  <li>
                    <a href="#size" class="toc-h2 toc-link" data-title="size">size</a>
                  </li>
              </ul>
          </li>
      </div>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduction'>Introduction</h1>
<p>Bluzelle combines the sharing economy with the token economy - renting individuals&#39; computer storage space to earn tokens while dApp developers use tokens to have their dApp&#39;s data stored and managed.</p>
<h1 id='getting-bluzelle'>Getting Bluzelle</h1>
<blockquote>
<p>Our client JavaScript library can be installed through <code>npm</code>.</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>npm install bluzelle
</code></pre>
<blockquote>
<p>You import <em>Bluzelle</em> into your application the same as any other library.</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code><span class="kr">const</span> <span class="nx">bluzelle</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'bluzelle'</span><span class="p">);</span>
</code></pre>
<p>Our Lovelace release will provide developer tools for <em>JavaScript</em>, <em>NEO</em>, and <em>Soliditity</em>, as well as a generic <em>WebSocket</em> interface for communicating with the swarm.</p>

<p>This documentation covers our <strong>JavaScript</strong> and <strong>WebSocket</strong> tools only. Each function in the JavaScript API wraps a request-response pair in the WebSocket API.</p>
<h2 id='crud-application'>CRUD Application</h2>
<p>Click <a href="http://13.78.135.208/">here</a> to access our online <em>Bluzelle</em> CRUD application, developed using the JavaScript library.</p>
<h1 id='js-api'>JS API</h1><h2 id='connect-ws-uuid'>connect(ws, uuid)</h2><pre class="highlight javascript tab-javascript"><code>
<span class="c1">// promise syntax</span>
<span class="nx">bluzelle</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="s1">'ws://1.1.1.1:8000'</span><span class="p">,</span> <span class="nx">UUID</span><span class="p">);</span>

<span class="c1">// async/await syntax</span>
<span class="nx">bluzelle</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="s1">'ws://1.1.1.1:8000'</span><span class="p">,</span> <span class="nx">UUID</span><span class="p">);</span>
</code></pre>
<p>Configures the address, port, and UUID of the connection. This may be called multiple times to update the connection.</p>

<p><em>Bluzelle</em> uses <code>UUID</code>&#39;s to identify distinct databases on a single swarm. We recommend using <a href="https://en.wikipedia.org/wiki/Universally_unique_identifier#Version_4_(random)">Version 4 of the universally unique identifier</a>.</p>

<hr>

<table><thead>
<tr>
<th>Argument</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>ws</td>
<td>The WebSocket entry point to connect to.</td>
</tr>
<tr>
<td>uuid</td>
<td>The universally unique identifier (UUID), <a href="https://en.wikipedia.org/wiki/Universally_unique_identifier#Version_4_(random)">Version 4 is recommended</a></td>
</tr>
</tbody></table>
<h3 id='returns'>Returns</h3>
<p>Nothing</p>
<h3 id='fail-conditions'>Fail Conditions</h3>
<p>Fails when a connection could not be established.</p>

<aside class="warning">
You must replace <code>UUID</code> with your personal UUID.
</aside>

<aside class="notice">
This function is an abstraction over establishing a WebSocket connection, and thus does not wrap a particular command in the WebSocket API.
</aside>
<h2 id='create-key-value'>create(key, value)</h2><pre class="highlight javascript tab-javascript"><code><span class="c1">// promise syntax</span>
<span class="nx">bluzelle</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s1">'mykey'</span><span class="p">,</span> <span class="p">{</span> <span class="na">a</span><span class="p">:</span> <span class="mi">13</span> <span class="p">}).</span><span class="nx">then</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="p">...</span> <span class="p">},</span> <span class="nx">error</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="p">...</span> <span class="p">});</span>

<span class="c1">// async/await syntax</span>
<span class="nx">await</span> <span class="nx">bluzelle</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s1">'mykey'</span><span class="p">,</span> <span class="p">{</span> <span class="na">a</span><span class="p">:</span> <span class="mi">13</span> <span class="p">});</span>
</code></pre>
<p>Creates a field. <em>Bluzelle</em> supports JavaScript types that are <code>JSON</code>-serializable (strings, objects, numbers, booleans, arrays, and combinations theereof) and also serial data in the form of an <a href="">ArrayBuffer</a>. Functions are not valid.</p>

<hr>

<table><thead>
<tr>
<th>Argument</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>key</td>
<td>The name of the key</td>
</tr>
<tr>
<td>value</td>
<td>The value to set the key</td>
</tr>
</tbody></table>
<h3 id='returns-2'>Returns</h3>
<p>Nothing.</p>
<h3 id='fail-conditions-2'>Fail Conditions</h3>
<p>Fails when a response is not received from the connection or invalid value.</p>
<h2 id='read-key'>read(key)</h2><pre class="highlight javascript tab-javascript"><code><span class="c1">// promise syntax</span>
<span class="nx">bluzelle</span><span class="p">.</span><span class="nx">read</span><span class="p">(</span><span class="s1">'mykey'</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="nx">value</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="p">...</span> <span class="p">},</span> <span class="nx">error</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="p">...</span> <span class="p">});</span>

<span class="c1">// async/await syntax</span>
<span class="kr">const</span> <span class="nx">value</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">bluzelle</span><span class="p">.</span><span class="nx">read</span><span class="p">(</span><span class="s1">'mykey'</span><span class="p">);</span>
</code></pre>
<p>Retrieve the value of a key.</p>

<hr>

<table><thead>
<tr>
<th>Argument</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>key</td>
<td>The key to retrieve.</td>
</tr>
</tbody></table>
<h3 id='returns-3'>Returns</h3>
<p>The value of the key. This is anything that is valid in the <em>Bluzelle</em> database. (See <a href="#update-key-value"><code>update(key, value)</code></a>)</p>
<h3 id='fail-conditions-3'>Fail Conditions</h3>
<p>Fails when a response is not recieved or the key does not exist in the database.</p>
<h2 id='update-key-value'>update(key, value)</h2><pre class="highlight javascript tab-javascript"><code><span class="c1">// promise syntax</span>
<span class="nx">bluzelle</span><span class="p">.</span><span class="nx">update</span><span class="p">(</span><span class="s1">'mykey'</span><span class="p">,</span> <span class="p">{</span> <span class="na">a</span><span class="p">:</span> <span class="mi">13</span> <span class="p">}).</span><span class="nx">then</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="p">...</span> <span class="p">},</span> <span class="nx">error</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="p">...</span> <span class="p">});</span>

<span class="c1">// async/await syntax</span>
<span class="nx">await</span> <span class="nx">bluzelle</span><span class="p">.</span><span class="nx">update</span><span class="p">(</span><span class="s1">'mykey'</span><span class="p">,</span> <span class="p">{</span> <span class="na">a</span><span class="p">:</span> <span class="mi">13</span> <span class="p">});</span>
</code></pre>
<blockquote>
<p>Serial data example.</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code>
<span class="kr">const</span> <span class="nx">arr</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Uint8Array</span><span class="p">(</span><span class="mi">1000</span><span class="p">);</span>

<span class="nx">arr</span><span class="p">.</span><span class="nx">fill</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">400</span><span class="p">);</span> <span class="c1">// Fill 4 in slots 200-400.</span>

<span class="nx">await</span> <span class="nx">bluzelle</span><span class="p">.</span><span class="nx">update</span><span class="p">(</span><span class="s1">'mykey'</span><span class="p">,</span> <span class="nx">arr</span><span class="p">.</span><span class="nx">buffer</span><span class="p">);</span>
</code></pre>
<p>Update a field in the database.</p>

<hr>

<table><thead>
<tr>
<th>Argument</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>key</td>
<td>The name of the key to query</td>
</tr>
<tr>
<td>value</td>
<td>The value to set the key</td>
</tr>
</tbody></table>
<h3 id='returns-4'>Returns</h3>
<p>Nothing.</p>
<h3 id='fail-conditions-4'>Fail Conditions</h3>
<p>Fails when a response is not received from the connection or invalid value.</p>
<h2 id='remove-key'>remove(key)</h2><pre class="highlight javascript tab-javascript"><code><span class="c1">// promise syntax</span>
<span class="nx">bluzelle</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="s1">'mykey'</span><span class="p">).</span><span class="nx">then</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="p">...</span> <span class="p">},</span> <span class="nx">error</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="p">...</span> <span class="p">});</span>

<span class="c1">// async/await syntax</span>
<span class="nx">await</span> <span class="nx">bluzelle</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="s1">'mykey'</span><span class="p">);</span>
</code></pre>
<p>Deletes a field from the database.</p>

<hr>

<table><thead>
<tr>
<th>Argument</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>key</td>
<td>The name of the key to delete.</td>
</tr>
</tbody></table>
<h3 id='returns-5'>Returns</h3>
<p>Nothing.</p>
<h3 id='fail-conditions-5'>Fail Conditions</h3>
<p>Fails when a response is not received from the connection or key not in database.</p>
<h2 id='has-key'>has(key)</h2>
<blockquote>
<p>Our JavaScript library makes extensive use of <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">JavaScript promises</a> to wrap the underlying request-response architecture.</p>

<p>You may also use <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function">async/await</a> syntax to avoid the use of <code>then</code>.</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code><span class="c1">// promise syntax</span>
<span class="nx">bluzelle</span><span class="p">.</span><span class="nx">has</span><span class="p">(</span><span class="s1">'mykey'</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="nx">hasMyKey</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="p">...</span> <span class="p">},</span> <span class="nx">error</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="p">...</span> <span class="p">});</span>

<span class="c1">// async/await syntax</span>
<span class="kr">const</span> <span class="nx">hasMyKey</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">bluzelle</span><span class="p">.</span><span class="nx">has</span><span class="p">(</span><span class="s1">'mykey'</span><span class="p">);</span>
</code></pre>
<p>Query to see if a key is in the database.</p>

<hr>

<table><thead>
<tr>
<th>Argument</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>key</td>
<td>The name of the key to query</td>
</tr>
</tbody></table>
<h3 id='returns-6'>Returns</h3>
<p>A boolean value, <code>true</code> of <code>false</code>, representing whether or not the key is in the database.</p>
<h3 id='fail-conditions-6'>Fail Conditions</h3>
<p>Fails when a response is not received from the connection.</p>
<h2 id='keys'>keys()</h2><pre class="highlight javascript tab-javascript"><code><span class="c1">// promise syntax</span>
<span class="nx">bluzelle</span><span class="p">.</span><span class="nx">keys</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="nx">keys</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="p">...</span> <span class="p">},</span> <span class="nx">error</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="p">...</span> <span class="p">});</span>

<span class="c1">// async/await syntax</span>
<span class="kr">const</span> <span class="nx">keys</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">bluzelle</span><span class="p">.</span><span class="nx">keys</span><span class="p">();</span>
</code></pre>
<p>Retrieve a list of all keys.</p>

<hr>

<table><thead>
<tr>
<th>Argument</th>
<th>Description</th>
</tr>
</thead><tbody>
</tbody></table>
<h3 id='returns-7'>Returns</h3>
<p>An array of strings representing keys in the database. ex. <code>[&quot;Key1&quot;, &quot;Key2&quot;, ...]</code></p>
<h3 id='fail-conditions-7'>Fail Conditions</h3>
<p>Fails when a response is not received from the connection.</p>
<h1 id='websocket-api'>WebSocket API</h1>
<p>The <em>Bluzelle</em> architecture consists of a request-response system through WebSockets.</p>

<hr>

<p>Each WebSocket <strong>request</strong> is a JSON object and may have the following fields:</p>

<ul>
<li><code>cmd</code>: The identifier of the request. (ex. <code>&quot;read&quot;</code>, <code>&quot;update&quot;</code>, ...)</li>
<li><code>data</code>: Complementary data for the request. </li>
<li><code>bzn-api</code>: Used internally by the daemon. Set to constant <code>&quot;crud&quot;</code> for this guide.</li>
<li><code>db-uuid</code>: The <code>UUID</code> for your database.</li>
<li><code>request-id</code>: (Optional) An identifier for this request..</li>
</ul>

<hr>

<p>Likewise, each WebSocket <strong>response</strong> from a <em>Bluzelle</em> daemon is a JSON object and may have the following fields:</p>

<ul>
<li><code>data</code>: Complementary data for the response.</li>
<li><code>request-id</code>: The <code>request-id</code> field of the initial request, if present.</li>
<li><code>error</code>: If present, this is an error string signifying that the request has failed.</li>
</ul>

<aside class="notice">
The <em>Bluzelle</em> database reads and writes values encoded in strings. It is the responsibility of the programmer to interpret these values to meet their desired functionality.
</aside>
<h2 id='create'>create</h2><pre class="highlight json-doc tab-json-doc"><code><span class="w">
</span><span class="c1">// Request</span><span class="w">

</span><span class="p">{</span><span class="w">
  </span><span class="s2">"bzn-api"</span><span class="p">:</span><span class="w"> </span><span class="s2">"crud"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"cmd"</span><span class="p">:</span><span class="w"> </span><span class="s2">"create"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"myKey"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"I2luY2x1ZGUgPG1vY2tzL21vY2tfbm9kZV9iYXNlLmhwcD4NCiNpbmNsdWRlIDxtb2Nrcy9tb2NrX3Nlc3Npb25fYmFzZS5ocHA+DQojaW5jbHVkZSA8bW9ja3MvbW9ja19yYWZ0X2Jhc2UuaHBwPg0KI2luY2x1ZGUgPG1vY2tzL21vY2tfc3RvcmFnZV9iYXNlLmhwcD4NCg=="</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"db-uuid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"80174b53-2dda-49f1-9d6a-6a780d4cceca"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"request-id"</span><span class="p">:</span><span class="w"> </span><span class="mi">33</span><span class="w">
</span><span class="p">}</span><span class="w">


</span><span class="c1">// Successful Response</span><span class="w">

</span><span class="p">{</span><span class="w">
  </span><span class="s2">"request-id"</span><span class="p">:</span><span class="w"> </span><span class="mi">33</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="c1">// Failure Response</span><span class="w">

</span><span class="p">{</span><span class="w">
    </span><span class="s2">"error"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"RECORD_EXISTS"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"request-id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">33</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="c1">// Redirection Response</span><span class="w">

</span><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"leader-host"</span><span class="p">:</span><span class="s2">"127.0.0.1"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"leader-id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"137a8403-52ec-43b7-8083-91391d4c5e67"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"leader-name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"peer1"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"leader-port"</span><span class="p">:</span><span class="w"> </span><span class="mi">49153</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"error"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"NOT_THE_LEADER"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"request-id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">33</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="err">Creates</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">key</span><span class="w"> </span><span class="err">value</span><span class="w"> </span><span class="err">pair</span><span class="w"> </span><span class="err">in</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">database.</span><span class="w"> </span><span class="err">Data</span><span class="w"> </span><span class="err">needs</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">be</span><span class="w"> </span><span class="err">string</span><span class="w"> </span><span class="err">encoded.</span><span class="w">
</span><span class="err">Create</span><span class="p">,</span><span class="w"> </span><span class="err">read</span><span class="p">,</span><span class="w"> </span><span class="err">update</span><span class="w"> </span><span class="err">and</span><span class="w"> </span><span class="err">delete</span><span class="w"> </span><span class="err">require</span><span class="w"> </span><span class="err">you</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">be</span><span class="w"> </span><span class="err">talking</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">swarm</span><span class="w"> </span><span class="err">leader.</span><span class="w"> </span><span class="err">In</span><span class="w"> </span><span class="err">this</span><span class="w"> </span><span class="err">case</span><span class="p">,</span><span class="w"> </span><span class="err">you</span><span class="w"> </span><span class="err">will</span><span class="w"> </span><span class="err">get</span><span class="w"> </span><span class="err">this</span><span class="w"> </span><span class="err">response</span><span class="p">,</span><span class="w"> </span><span class="err">and</span><span class="w"> </span><span class="err">should</span><span class="w"> </span><span class="err">reconnect</span><span class="w"> </span><span class="err">at</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">address</span><span class="w"> </span><span class="err">and</span><span class="w"> </span><span class="err">port</span><span class="w"> </span><span class="err">given.</span><span class="w">


</span><span class="err">##</span><span class="w"> </span><span class="err">read</span><span class="w">

</span><span class="err">```json-doc</span><span class="w">

</span><span class="c1">// Request</span><span class="w">

</span><span class="p">{</span><span class="w">
  </span><span class="s2">"cmd"</span><span class="p">:</span><span class="w"> </span><span class="s2">"read"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mykey"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"bzn-api"</span><span class="p">:</span><span class="w"> </span><span class="s2">"crud"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"db-uuid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4982e0b0-0b2f-4c3a-b39f-26878e2ac814"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"request-id"</span><span class="p">:</span><span class="w"> </span><span class="mi">13</span><span class="w">
</span><span class="p">}</span><span class="w">


</span><span class="c1">// Successful Response</span><span class="w">

</span><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"He932NLA"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"request-id"</span><span class="p">:</span><span class="w"> </span><span class="mi">13</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="c1">// Failure Response</span><span class="w">

</span><span class="p">{</span><span class="w">
  </span><span class="s2">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RECORD_NOT_FOUND"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"request-id"</span><span class="p">:</span><span class="w"> </span><span class="mi">13</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="c1">// Redirection Response</span><span class="w">

</span><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"leader-host"</span><span class="p">:</span><span class="s2">"127.0.0.1"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"leader-id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"137a8403-52ec-43b7-8083-91391d4c5e67"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"leader-name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"peer1"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"leader-port"</span><span class="p">:</span><span class="w"> </span><span class="mi">49153</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"error"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"NOT_THE_LEADER"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"request-id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">13</span><span class="w">
</span><span class="p">}</span><span class="w">


</span></code></pre>
<p>Reads data from a given key. Data is in the form of a <code>base64</code>-encoded string.
Create, read, update and delete require you to be talking to the swarm leader. In this case, you will get this response, and should reconnect at the address and port given.</p>
<h2 id='update'>update</h2><pre class="highlight json-doc tab-json-doc"><code><span class="w">
</span><span class="c1">// Request</span><span class="w">

</span><span class="p">{</span><span class="w">
  </span><span class="s2">"cmd"</span><span class="p">:</span><span class="w"> </span><span class="s2">"update"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mykey"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GNJjA39s"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"bzn-api"</span><span class="p">:</span><span class="w"> </span><span class="s2">"crud"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"db-uuid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4982e0b0-0b2f-4c3a-b39f-26878e2ac814"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"request-id"</span><span class="p">:</span><span class="w"> </span><span class="mi">45</span><span class="w">
</span><span class="p">}</span><span class="w">


</span><span class="c1">// Successful Response</span><span class="w">

</span><span class="p">{</span><span class="w">
  </span><span class="s2">"request-id"</span><span class="p">:</span><span class="w"> </span><span class="mi">45</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="c1">// Failure Response</span><span class="w">

</span><span class="p">{</span><span class="w">
    </span><span class="s2">"error"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"RECORD_NOT_FOUND"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"request-id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">45</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="c1">// Redirection Response</span><span class="w">

</span><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"leader-host"</span><span class="p">:</span><span class="s2">"127.0.0.1"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"leader-id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"137a8403-52ec-43b7-8083-91391d4c5e67"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"leader-name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"peer1"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"leader-port"</span><span class="p">:</span><span class="w"> </span><span class="mi">49153</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"error"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"NOT_THE_LEADER"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"request-id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">45</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre>
<p>Updates data to a given key.
Create, read, update and delete require you to be talking to the swarm leader. In this case, you will get this response, and should reconnect at the address and port given.</p>
<h2 id='delete'>delete</h2><pre class="highlight json-doc tab-json-doc"><code><span class="w">
</span><span class="c1">// Request</span><span class="w">

</span><span class="p">{</span><span class="w">
  </span><span class="s2">"cmd"</span><span class="p">:</span><span class="w"> </span><span class="s2">"delete"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mykey"</span><span class="p">,</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"bzn-api"</span><span class="p">:</span><span class="w"> </span><span class="s2">"crud"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"db-uuid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4982e0b0-0b2f-4c3a-b39f-26878e2ac814"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"request-id"</span><span class="p">:</span><span class="w"> </span><span class="mi">45</span><span class="w">
</span><span class="p">}</span><span class="w">


</span><span class="c1">// Successful Response</span><span class="w">

</span><span class="p">{</span><span class="w">
  </span><span class="s2">"request-id"</span><span class="p">:</span><span class="w"> </span><span class="mi">45</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="c1">// Failure Response</span><span class="w">

</span><span class="p">{</span><span class="w">
    </span><span class="s2">"error"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"RECORD_NOT_FOUND"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"request-id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">45</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="c1">// Redirection Response</span><span class="w">

</span><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"leader-host"</span><span class="p">:</span><span class="s2">"127.0.0.1"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"leader-id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"137a8403-52ec-43b7-8083-91391d4c5e67"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"leader-name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"peer1"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"leader-port"</span><span class="p">:</span><span class="w"> </span><span class="mi">49153</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"error"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"NOT_THE_LEADER"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"request-id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">45</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre>
<p>Deletes a given key.
Create, read, update and delete require you to be talking to the swarm leader. In this case, you will get this response, and should reconnect at the address and port given.</p>
<h2 id='has'>has</h2><pre class="highlight json-doc tab-json-doc"><code><span class="w">
</span><span class="c1">// Request</span><span class="w">

</span><span class="p">{</span><span class="w">
  </span><span class="s2">"cmd"</span><span class="p">:</span><span class="w"> </span><span class="s2">"has"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mykey"</span><span class="p">,</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"bzn-api"</span><span class="p">:</span><span class="w"> </span><span class="s2">"crud"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"db-uuid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4982e0b0-0b2f-4c3a-b39f-26878e2ac814"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"request-id"</span><span class="p">:</span><span class="w"> </span><span class="mi">99</span><span class="w">
</span><span class="p">}</span><span class="w">


</span><span class="c1">// Response</span><span class="w">

</span><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"key-exists"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">    </span><span class="c1">// "key-exists" : false</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"request-id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">99</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre>
<p>Query if a key exists in the database.</p>
<h2 id='keys-2'>keys</h2><pre class="highlight json-doc tab-json-doc"><code><span class="w">

</span><span class="c1">// Request</span><span class="w">

</span><span class="p">{</span><span class="w">
  </span><span class="s2">"cmd"</span><span class="p">:</span><span class="w"> </span><span class="s2">"keys"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"bzn-api"</span><span class="p">:</span><span class="w"> </span><span class="s2">"crud"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"db-uuid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4982e0b0-0b2f-4c3a-b39f-26878e2ac814"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"request-id"</span><span class="p">:</span><span class="w"> </span><span class="mi">45</span><span class="w">
</span><span class="p">}</span><span class="w">


</span><span class="c1">// Response</span><span class="w">

</span><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"keys"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"key1"</span><span class="p">,</span><span class="w"> </span><span class="s2">"key2"</span><span class="p">,</span><span class="w"> </span><span class="s2">"hello"</span><span class="p">,</span><span class="w"> </span><span class="s2">"world"</span><span class="p">,</span><span class="w"> </span><span class="c1">...</span><span class="p">]</span><span class="w">   </span><span class="c1">// "keys": null</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"request-id"</span><span class="p">:</span><span class="w"> </span><span class="mi">45</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre>
<p>Obtain a list of keys in the database.</p>
<h2 id='size'>size</h2><pre class="highlight json-doc tab-json-doc"><code><span class="w">

</span><span class="c1">// Request</span><span class="w">

</span><span class="p">{</span><span class="w">
  </span><span class="s2">"bzn-api"</span><span class="p">:</span><span class="w"> </span><span class="s2">"crud"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"cmd"</span><span class="p">:</span><span class="w"> </span><span class="s2">"size"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"db-uuid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4982e0b0-0b2f-4c3a-b39f-26878e2ac814"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"request-id"</span><span class="p">:</span><span class="w"> </span><span class="mi">47</span><span class="w">
</span><span class="p">}</span><span class="w">


</span><span class="c1">// Response</span><span class="w">

</span><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"size"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">624</span><span class="w">    </span><span class="c1">// "size" : 0</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"request-id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">47</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre>
<p>Returns the size of your database in bytes.</p>

      </div>
      <div class="dark-box">
      </div>
    </div>
  </body>
</html>
